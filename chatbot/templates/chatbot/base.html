{% load static %}

<html>
    <head>
        <title>Chatroom</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{% static 'css/chatbot.css' %}">
        <link rel="stylesheet" href="{% static 'css/toggle-switch.css' %}">
        <link rel="icon" href="{% static 'images/favicon.png' %}">
    </head>
    <body>
        <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-3">
            <div class="page-header row">
                <div class="col-xs-10">
                    <h1><a href="/">ChatRoom</a></h1>
                </div>
                <div class="col-xs-2" style="margin-top: 25px;">
                    {% if user.is_authenticated %}
                        <a class="top-menu" href="{% url 'login' %}"><span class="glyphicon glyphicon-log-out"></span></a>
                    {% endif %}
                </div>
            </div>
            <div class="content">
                {% block content %}
                {% endblock %}
            </div>
            <div id="noty-holder"></div>
        </div>
    </body>
    <script src="{% static 'jquery-1.12.0/jquery-1.12.0.min.js' %}"></script>
    <script src="{% static 'bootstrap-3.3.7-dist/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'bootstrap-toast/jquery.toaster.js' %}"></script>

    <script>
        var themes = {
            "default": '{% static "bootstrap-3.3.7-dist/css/bootstrap.min.css" %}',
            "cerulean" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-cerulean.min.css" %}',
            "cosmo" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-cosmo.min.css" %}',
            "cyborg" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-cyborg.min.css" %}',
            "darkly" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-darkly.min.css" %}',
            "flatly" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-flatly.min.css" %}',
            "journal" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-journal.min.css" %}',
            "lumen" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-lumen.min.css" %}',
            "paper" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-paper.min.css" %}',
            "readable" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-readable.min.css" %}',
            "sandstone" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-sandstone.min.css" %}',
            "simplex" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-simplex.min.css" %}',
            "slate" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-slate.min.css" %}',
            "spacelab" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-spacelab.min.css" %}',
            "superhero" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-superhero.min.css" %}',
            "united" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-united.min.css" %}',
            "yeti" : '{% static "bootstrap-3.3.7-dist/css/bootstrap-yeti.min.css" %}',
        }
        var themesheet = $('<link href="'+ themes['{{ theme }}'] + '" rel="stylesheet" />');
        themesheet.appendTo('head');
        var themeurl = themes['{{ theme }}']; 
        themesheet.attr('href', themeurl);

        function getBroadcastMessages(){
            $.ajax({
                type: "POST",
                url: '/broadcastmessages/',
                headers: {'X-CSRFToken': '{{ csrf_token }}'},
                data: {},
                success: function(response) {
                    var message = response.message;
                    if(message != "")
                        $.toaster({ priority : 'warning', message : response.message});
                },
                error: function(error) {
                    console.log(error);
                }
            });
        }
        $(function(){
            setInterval(getBroadcastMessages, 5000);
        });
    </script>
    {% block script %}
    {% endblock %}
</html>